{
    "$version": "1",

    "name": "h264-streamer",
    "description": "Combined MJPEG/H.264 camera streamer - provides MJPEG stream for Mainsail/Fluidd and H.264 FLV stream for Anycubic slicer. Uses USB camera with hardware H.264 encoding.",
    "version": "0.2",

    "properties": {
        "mode": {
            "display": "Mode",
            "description": "Operating mode: go-klipper (Anycubic firmware with Rinkhals) or vanilla-klipper (external Klipper on Raspberry Pi).",
            "type": "select",
            "options": ["go-klipper", "vanilla-klipper"],
            "default": "go-klipper"
        },
        "streaming_port": {
            "display": "Streaming Port",
            "description": "HTTP port for MJPEG stream and snapshots (default: 8080).",
            "type": "int",
            "default": "8080"
        },
        "control_port": {
            "display": "Control Port",
            "description": "HTTP port for control panel and API (default: 8081).",
            "type": "int",
            "default": "8081"
        },
        "autolanmode": {
            "display": "Auto-enable LAN mode",
            "description": "Automatically enable LAN mode on startup if not already enabled. Required for camera access.",
            "type": "bool",
            "default": "true"
        },
        "auto_skip": {
            "display": "Auto skip ratio",
            "description": "Automatically adjust frame skip ratio based on CPU usage to keep at least 40% CPU free.",
            "type": "bool",
            "default": "false"
        },
        "target_cpu": {
            "display": "Target CPU %",
            "description": "Target maximum CPU usage when auto-skip is enabled (30-90%).",
            "type": "int",
            "default": "60"
        },
        "logging": {
            "display": "Enable logging",
            "type": "bool",
            "default": "false"
        },
        "jpeg_quality": {
            "display": "JPEG Quality",
            "description": "JPEG quality for hardware encoding in rkmpi-yuyv mode (1-99).",
            "type": "int",
            "default": "85"
        },
        "h264_resolution": {
            "display": "H.264 Resolution",
            "description": "H.264 encoding resolution for rkmpi mode only. Lower resolution reduces CPU usage. MJPEG stream stays at camera resolution.",
            "type": "select",
            "options": ["1280x720", "640x480"],
            "default": "1280x720"
        }
    }
}
